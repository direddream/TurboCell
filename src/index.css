:root {
  /* -----------------------------------------------------------------------
   * Global Theme Tokens (Dark)
   * Requirement: components should not hardcode #000/#fff; use tokens instead.
   * --------------------------------------------------------------------- */

  /* Backgrounds */
  --bg-page: #0b1220;
  --bg-page-2: #0f1b33;
  --bg-card: rgba(255, 255, 255, 0.06);
  --bg-card-2: rgba(255, 255, 255, 0.09);
  --bg-elevated: rgba(15, 24, 44, 0.94);

  /* Borders / Shadows */
  --border: rgba(180, 205, 255, 0.18);
  --shadow: rgba(0, 0, 0, 0.35);

  /* Text */
  --text-primary: rgba(255, 255, 255, 0.92);
  --text-secondary: rgba(190, 210, 255, 0.72);
  --text-muted: rgba(170, 190, 235, 0.56);

  /* Accents */
  --primary: #6ea8fe;
  --success: #3ddc97;
  --warning: #ffcc66;
  --danger: #ff6b6b;

  /* Semantic surfaces (still dark; never white) */
  --bg-info: rgba(110, 168, 254, 0.14);
  --bg-success: rgba(61, 220, 151, 0.12);
  --bg-warning: rgba(255, 204, 102, 0.14);
  --bg-danger: rgba(255, 107, 107, 0.14);

  --border-info: rgba(110, 168, 254, 0.35);
  --border-success: rgba(61, 220, 151, 0.32);
  --border-warning: rgba(255, 204, 102, 0.36);
  --border-danger: rgba(255, 107, 107, 0.36);

  /* Back-compat aliases used across the codebase */
  --bg0: var(--bg-page);
  --bg1: var(--bg-page-2);
  --card: var(--bg-card);
  --text: var(--text-primary);
  --muted: var(--text-secondary);
  --accent: var(--primary);
  --good: var(--success);
  --warn: var(--warning);
  --bad: var(--danger);

  font-family: Inter, PingFang SC, 'Microsoft YaHei', ui-sans-serif, system-ui,
    -apple-system, Segoe UI, Roboto, Helvetica, Arial, 'Apple Color Emoji',
    'Segoe UI Emoji';
  font-weight: 400;
  color: var(--text-primary);
  background: radial-gradient(1100px 600px at 15% 10%,
      #1d2a4d 0%,
      transparent 55%),
    radial-gradient(900px 480px at 85% 15%, #2a1d4d 0%, transparent 55%),
    linear-gradient(180deg, var(--bg0), var(--bg1));
  color-scheme: dark;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

* {
  box-sizing: border-box;
}

/* Make media elements responsive */
img,
picture,
video,
canvas,
svg {
  max-width: 100%;
  height: auto;
  display: block;
}

/* Responsive utilities */
.responsive-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 12px;
}

.responsive-table {
  width: 100%;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}

/* Make tables inside pages responsive: allow horizontal scroll on small screens */
.page .responsive-table,
.page table {
  width: 100%;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  display: block;
}

html,
body,
#root {
  height: 100%;
}

body {
  margin: 0;
  color: var(--text-primary);
}

a {
  color: inherit;
  text-decoration: none;
}

.appShell {
  min-height: 100%;
  display: flex;
  flex-direction: column;
}

.topBar {
  position: sticky;
  top: 0;
  z-index: 10;
  backdrop-filter: blur(10px);
  background: rgba(10, 16, 30, 0.55);
  border-bottom: 1px solid var(--border);
}

.topBarInner {
  max-width: 1180px;
  margin: 0 auto;
  padding: 14px 18px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 16px;
}

.layoutHeaderInner {
  max-width: 1360px;
}

.layoutHeaderLeft {
  display: flex;
  align-items: center;
  gap: 16px;
}

.layoutBrand {
  display: inline-flex;
  align-items: center;
  gap: 10px;
  font-size: 18px;
  font-weight: 600;
  color: var(--primary);
}

.layoutBrandIcon {
  font-size: 22px;
  color: var(--primary);
}

.layoutBrandText {
  color: var(--text-primary);
}

.layoutProjectSelect {
  padding: 8px 12px;
  border: 1px solid var(--border);
  border-radius: 10px;
  background: var(--bg-card);
  color: var(--text-primary);
  cursor: pointer;
  outline: none;
}

.layoutProjectSelect option {
  background: var(--bg-page);
  color: var(--text-primary);
}

.layoutHeaderCenter {
  flex: 1;
  max-width: 420px;
  margin: 0 18px;
}

.layoutHeaderRight {
  display: flex;
  align-items: center;
  gap: 14px;
}

.layoutHeaderToggle {
  display: inline-flex;
  align-items: center;
  gap: 8px;
}

.layoutHeaderToggleLabel {
  font-size: 14px;
  color: var(--text-secondary);
}

.brand {
  font-weight: 600;
  letter-spacing: 0.2px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.brandSub {
  font-size: 12px;
  padding: 2px 8px;
  border: 1px solid var(--border);
  border-radius: 999px;
  color: var(--muted);
}

.nav {
  display: flex;
  gap: 10px;
  align-items: center;
}

.navLink {
  padding: 8px 10px;
  border-radius: 10px;
  border: 1px solid transparent;
  color: var(--muted);
}

.navLink:hover {
  border-color: var(--border);
  color: var(--text);
}

.navLinkActive {
  background: var(--bg-card);
  border-color: var(--border);
  color: var(--text);
}

.page {
  width: 100%;
  max-width: 1180px;
  margin: 0 auto;
  padding: 18px;
  flex: 1;
}

.footer {
  padding: 16px 18px;
  color: var(--muted);
  border-top: 1px solid var(--border);
  text-align: center;
}

.layoutFooter {
  padding: 16px 24px;
  border-top: 1px solid var(--border);
  text-align: center;
  color: var(--text-muted);
  font-size: 12px;
  background: rgba(10, 16, 30, 0.55);
}

.pageHeader h2 {
  margin: 0;
  font-size: 22px;
  font-weight: 600;
}

.pageHeader .muted {
  margin-top: 6px;
}

.hero h1 {
  margin: 0;
  font-size: 40px;
  letter-spacing: -0.6px;
  font-weight: 600;
}

.muted {
  color: var(--text-secondary);
}

.small {
  font-size: 12px;
}

.mono {
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
    'Liberation Mono', 'Courier New', monospace;
}

.stack {
  display: flex;
  flex-direction: column;
  gap: 14px;
}

.stackSmall {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.grid2 {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 14px;
}

.grid2tight {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
}

@media (max-width: 980px) {
  .grid2 {
    grid-template-columns: 1fr;
  }
}

.card {
  border: 1px solid var(--border);
  border-radius: 16px;
  background: linear-gradient(180deg,
      rgba(255, 255, 255, 0.06),
      rgba(255, 255, 255, 0.03));
  box-shadow: 0 10px 30px var(--shadow);
  overflow: hidden;
}

.cardTitle {
  padding: 12px 14px;
  border-bottom: 1px solid var(--border);
  font-weight: 600;
  color: rgba(255, 255, 255, 0.86);
}

.cardBody {
  padding: 14px;
}

.form {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.field {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.field>span {
  font-size: 12px;
  color: var(--muted);
}

input,
select {
  background: var(--bg-card);
  color: var(--text-primary);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 10px 10px;
  outline: none;
}

select option {
  background: var(--bg-page);
  color: var(--text-primary);
  padding: 10px;
}

input:focus,
select:focus {
  border-color: rgba(110, 168, 254, 0.8);
  box-shadow: 0 0 0 4px rgba(110, 168, 254, 0.16);
}

.row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
}

.seg {
  display: inline-flex;
  gap: 6px;
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 4px;
  background: rgba(255, 255, 255, 0.04);
}

.seg button {
  border: 1px solid transparent;
  background: transparent;
  color: var(--muted);
  padding: 8px 10px;
  border-radius: 10px;
  cursor: pointer;
}

.seg .segActive {
  background: rgba(110, 168, 254, 0.18);
  border-color: rgba(110, 168, 254, 0.4);
  color: var(--text);
}

.buttonPrimary {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 10px 12px;
  border-radius: 12px;
  border: 1px solid rgba(110, 168, 254, 0.5);
  background: rgba(110, 168, 254, 0.15);
  color: var(--text-primary);
  font-weight: 600;
}

.buttonPrimary:hover {
  background: rgba(110, 168, 254, 0.22);
}

.tableWrap {
  width: 100%;
  overflow: auto;
}

.table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  min-width: 0;
}

.tableTight {
  min-width: 0;
}

.table th,
.table td {
  padding: 10px 10px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);
  vertical-align: top;
}

.table th {
  color: rgba(255, 255, 255, 0.75);
  font-weight: 600;
  text-align: left;
  background: rgba(255, 255, 255, 0.03);
  position: sticky;
  top: 0;
}

.tags {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.tag {
  display: inline-flex;
  align-items: center;
  padding: 4px 8px;
  border-radius: 999px;
  border: 1px solid var(--border);
  font-size: 12px;
  color: rgba(255, 255, 255, 0.85);
  background: rgba(255, 255, 255, 0.04);
}

.tag-good {
  border-color: rgba(61, 220, 151, 0.5);
  background: rgba(61, 220, 151, 0.12);
}

.tag-warn {
  border-color: rgba(255, 204, 102, 0.55);
  background: rgba(255, 204, 102, 0.12);
}

.tag-bad {
  border-color: rgba(255, 107, 107, 0.55);
  background: rgba(255, 107, 107, 0.12);
}

.bullets {
  margin: 0;
  padding-left: 18px;
  color: var(--muted);
}

.kv {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-top: 10px;
}

.kvRow {
  display: flex;
  justify-content: space-between;
  gap: 12px;
}

/* Responsive Utilities */
/* 主三列布局容器 */
.layout-3col {
  display: flex;
  height: calc(100vh - 128px);
  flex-wrap: wrap;
  gap: 16px;
  overflow-x: hidden;
  /* 防止横向滚动条 */
}
}

.layout-3col-left,
.layout-3col-right {
  overflow: auto;
  background: linear-gradient(180deg, var(--bg-card), rgba(255, 255, 255, 0.03));
  border-radius: 8px;
  padding: 24px;
  border: 1px solid var(--border);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
  transition: width 0.3s;
  color: var(--text-primary);
}

/* Use CSS variables from the React component for explicit widths
   and make panels flex-basis aware so the center can shrink/grow. */
.layout-3col-left {
  width: var(--left-width, 320px);
  flex: 0 0 var(--left-width, 320px);
  min-width: 0;
}

.layout-3col-right {
  width: var(--right-width, 360px);
  flex: 0 0 var(--right-width, 360px);
  min-width: 0;
}

.layout-3col-center {
  flex: 1;
  overflow: auto;
  background: linear-gradient(180deg, var(--bg-card), rgba(255, 255, 255, 0.03));
  border-radius: 8px;
  padding: 24px;
  border: 1px solid var(--border);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
  color: var(--text-primary);
}

/* allow center panel to shrink inside flex container without overflow */
.layout-3col-center {
  min-width: 0;
}

.layout-3col-toggle {
  width: 24px;
  height: 48px;
  background: var(--bg-card-2);
  border: 1px solid var(--border);
  border-radius: 4px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  align-self: flex-start;
  margin-top: 20px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  color: var(--text-secondary);
}

@media (max-width: 1366px) {
  .layout-3col {
    flex-direction: column;
    height: auto !important;
    overflow-x: hidden !important;
    /* 防止横向滚动条 */
  }

  .layout-3col-left,
  .layout-3col-right,
  .layout-3col-center {
    width: 100% !important;
    flex: none;
    overflow-x: hidden !important;
    overflow-y: visible;
  }

  .layout-3col-toggle {
    display: none;
  }
}

/* Also support stacking when the layout container is narrow (desktop zoom)
   .stacked is added by ThreeColumnLayout when container width is small. */
.layout-3col.stacked {
  flex-direction: column;
  height: auto !important;
  overflow-x: hidden !important;
}

.layout-3col.stacked .layout-3col-left,
.layout-3col.stacked .layout-3col-right,
.layout-3col.stacked .layout-3col-center {
  width: 100% !important;
  flex: none;
  overflow-x: hidden !important;
  overflow-y: visible;
  padding: 12px !important;
}

.layout-3col.stacked .layout-3col-toggle {
  display: none;
}

/* Custom Scrollbar Styling - Dark Theme */
::-webkit-scrollbar {
  width: 10px;
  height: 10px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 10px;
}

::-webkit-scrollbar-thumb {
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.2) 0%, rgba(255, 255, 255, 0.1) 100%);
  border-radius: 10px;
  border: 2px solid rgba(255, 255, 255, 0.05);
  transition: background 0.3s ease;
}

::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.3) 0%, rgba(255, 255, 255, 0.2) 100%);
}

::-webkit-scrollbar-thumb:active {
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.4) 0%, rgba(255, 255, 255, 0.3) 100%);
}

/* Firefox scrollbar styling */
* {
  scrollbar-width: thin;
  scrollbar-color: rgba(255, 255, 255, 0.35) rgba(255, 255, 255, 0.06);
}

/* -----------------------------------------------------------------------
 * Ant Design (global dark skin enforcement)
 * Goal: no “white blocks” in Table/Input/Modal/Dropdown/Collapse/Tabs/etc.
 * --------------------------------------------------------------------- */

.ant-app {
  color: var(--text-primary);
}

.ant-typography,
.ant-typography p,
.ant-typography span,
.ant-form-item-label>label,
.ant-form-item-explain,
.ant-empty-description {
  color: var(--text-secondary);
}

.ant-typography,
.ant-form,
.ant-table,
.ant-table-wrapper,
.ant-collapse,
.ant-tabs {
  color: var(--text-primary);
}

/* Containers: Card/Panel/Modal/Drawer/Popover/Tooltip */
.ant-card,
.ant-card-body,
.ant-modal-content,
.ant-drawer-content,
.ant-popover-inner,
.ant-tooltip-inner,
.ant-dropdown-menu,
.ant-select-dropdown,
.ant-picker-dropdown .ant-picker-panel-container {
  background: var(--bg-elevated) !important;
  border: 1px solid var(--border);
}

.ant-card,
.ant-modal-content,
.ant-drawer-content,
.ant-popover-inner,
.ant-dropdown-menu,
.ant-select-dropdown,
.ant-picker-dropdown .ant-picker-panel-container {
  box-shadow: 0 14px 40px var(--shadow);
}

.ant-modal-header,
.ant-modal-footer,
.ant-drawer-header,
.ant-drawer-footer,
.ant-popover-title {
  background: transparent !important;
  border-color: var(--border) !important;
}

.ant-tooltip-inner {
  border: 1px solid var(--border);
  color: var(--text-primary);
}

/* Inputs / Select / DatePicker */
.ant-input,
.ant-input-affix-wrapper,
.ant-input-number,
.ant-input-number-affix-wrapper,
.ant-select-selector,
.ant-picker,
.ant-slider-rail {
  background: var(--bg-card) !important;
  border-color: var(--border) !important;
  color: var(--text-primary) !important;
}

.ant-input::placeholder,
.ant-input-affix-wrapper input::placeholder {
  color: var(--text-muted);
}

.ant-select-selection-item,
.ant-select-selection-placeholder {
  color: var(--text-primary) !important;
}

.ant-select-selection-placeholder {
  color: var(--text-muted) !important;
}

/* Buttons */
.ant-btn-default {
  background: var(--bg-card) !important;
  border-color: var(--border) !important;
  color: var(--text-primary) !important;
}

.ant-btn-default:hover {
  background: var(--bg-card-2) !important;
}

/* Table */
.ant-table-container,
.ant-table-content,
.ant-table {
  background: transparent !important;
}

.ant-table-thead>tr>th {
  background: rgba(255, 255, 255, 0.03) !important;
  color: var(--text-secondary) !important;
  border-bottom: 1px solid rgba(255, 255, 255, 0.08) !important;
}

.ant-table-tbody>tr>td {
  background: transparent !important;
  color: var(--text-primary) !important;
  border-bottom: 1px solid rgba(255, 255, 255, 0.08) !important;
}

.ant-table-tbody>tr.ant-table-row:hover>td {
  background: var(--bg-card-2) !important;
}

/* Collapse / Tabs */
.ant-collapse,
.ant-tabs-card>.ant-tabs-nav .ant-tabs-tab,
.ant-tabs-nav::before {
  background: transparent !important;
  border-color: var(--border) !important;
}

.ant-collapse-item,
.ant-collapse-header,
.ant-collapse-content {
  border-color: var(--border) !important;
}

.ant-collapse-content-box {
  background: transparent !important;
}

.ant-tabs-tab {
  color: var(--text-secondary) !important;
}

.ant-tabs-tab.ant-tabs-tab-active .ant-tabs-tab-btn {
  color: var(--text-primary) !important;
}

/* Upload Dragger */
.ant-upload-wrapper .ant-upload-drag {
  background: var(--bg-card) !important;
  border-color: var(--border) !important;
}

.ant-upload-wrapper .ant-upload-drag:hover {
  border-color: var(--primary) !important;
}

.ant-upload-wrapper .ant-upload-drag .ant-upload-text {
  color: var(--text-primary) !important;
}

.ant-upload-wrapper .ant-upload-drag .ant-upload-hint {
  color: var(--text-muted) !important;
}

/* Radio Group */
.ant-radio-wrapper {
  color: var(--text-primary) !important;
}

.ant-radio-wrapper .ant-radio-inner {
  background: var(--bg-card) !important;
  border-color: var(--border) !important;
}

.ant-radio-wrapper-checked .ant-radio-inner {
  border-color: var(--primary) !important;
  background: var(--primary) !important;
}

/* Checkbox */
.ant-checkbox-wrapper {
  color: var(--text-primary) !important;
}

.ant-checkbox .ant-checkbox-inner {
  background: var(--bg-card) !important;
  border-color: var(--border) !important;
}

/* Progress */
.ant-progress-text {
  color: var(--text-primary) !important;
}

/* Steps */
.ant-steps .ant-steps-item-title {
  color: var(--text-primary) !important;
}

.ant-steps .ant-steps-item-description {
  color: var(--text-muted) !important;
}

/* Slider */
.ant-slider-track {
  background: var(--primary) !important;
}

/* Mobile / Small screen tweaks */
@media (max-width: 768px) {
  .topBarInner {
    max-width: 100%;
    padding: 10px 12px;
  }

  .layoutHeaderCenter {
    max-width: none;
    margin: 0 8px;
  }

  .layoutHeaderLeft,
  .layoutHeaderRight {
    gap: 8px;
  }

  .page {
    padding: 12px;
  }

  .pageHeader h2 {
    font-size: 18px;
  }

  .hero h1 {
    font-size: 28px;
  }

  .cardBody {
    padding: 12px;
  }

  .layout-3col-left,
  .layout-3col-right,
  .layout-3col-center {
    padding: 12px !important;
    width: 100% !important;
  }

  .layout-3col {
    height: auto !important;
    gap: 12px;
    flex-direction: column;
  }

  /* Make tables responsive on small screens */
  .table,
  .tableTight {
    min-width: 0 !important;
    width: 100% !important;
  }

  .table th,
  .table td {
    padding: 8px 6px;
    font-size: 13px;
  }

  input,
  select,
  .ant-input,
  .ant-select-selector {
    padding: 8px !important;
  }

  .buttonPrimary {
    padding: 8px 10px;
  }

  .layoutBrandText {
    font-size: 16px;
  }
}

@media (max-width: 420px) {
  .topBarInner {
    padding: 8px 10px;
  }

  .layoutHeaderCenter {
    display: none;
  }

  .layoutHeaderToggleLabel {
    display: none;
  }

  .cardTitle {
    padding: 10px 12px;
    font-size: 14px;
  }
}

.ant-slider-handle::after {
  background: var(--primary) !important;
  box-shadow: 0 0 0 2px var(--primary) !important;
}

/* Dropdown Menu */
.ant-dropdown-menu-item {
  color: var(--text-primary) !important;
}

.ant-dropdown-menu-item:hover {
  background: var(--bg-card-2) !important;
}

/* Segmented */
.ant-segmented {
  background: var(--bg-card) !important;
}

.ant-segmented-item {
  color: var(--text-secondary) !important;
}

.ant-segmented-item-selected {
  background: var(--bg-card-2) !important;
  color: var(--text-primary) !important;
}